{% extends 'base.html' %}

{% block title %} Nova senha {% endblock %}

{% block content %}
<button id="themeToggle" class="btn btn-secondary position-fixed top-0 end-0 m-3">
    Alternar Tema
</button>
<body class="d-flex justify-content-center align-items-center vh-100"> 

<div class="card p-4 shadow" style="width: 360px;">
    <h3 class="text-center mb-3">Definir nova senha</h3>

    {% if validlink %}
        <form method="post">
            {% csrf_token %}
            {{ form.new_password1.label_tag }}
            {{ form.new_password1 }}

            {{ form.new_password2.label_tag }}
            {{ form.new_password2 }}
            <br><br>
            <button type="submit" class="btn btn-primary w-100">Alterar senha</button>
        </form>
    {% else %}
        <p>O link de redefinição é inválido.</p>
    {% endif %}
</div>
 <script>
    const html = document.documentElement;
    const toggleBtn = document.getElementById("themeToggle");
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme) {
        html.setAttribute("data-bs-theme", savedTheme);
    }

    toggleBtn.addEventListener("click", () => {
        let current = html.getAttribute("data-bs-theme");
        let next = current === "dark" ? "light" : "dark";

        html.setAttribute("data-bs-theme", next);

        // Salva o tema escolhido
        localStorage.setItem("theme", next);
    });
  </script>
   </body>

{% endblock %}